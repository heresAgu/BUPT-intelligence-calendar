<!-- pages/courses/courses.wxml -->
<view class="courses-page">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <view class="header-title">è¯¾ç¨‹ç®¡ç†</view>
    <view class="header-actions">
      <button class="btn-add" bindtap="goToAddCourse">+ æ·»åŠ </button>
    </view>
  </view>

  <!-- å¯¼å…¥åŠŸèƒ½åŒº -->
  <view class="import-section">
    <view class="section-title"> å¿«é€Ÿå¯¼å…¥</view>
    <view class="import-buttons">
      <button class="btn-import-ocr" bindtap="goToOCRImport">
        <view class="import-icon">ğŸ“¸</view>
        <text>æ‹ç…§è¯†åˆ«</text>
      </button>
      <button class="btn-import-text" bindtap="goToTextImport">
        <view class="import-icon">ğŸ“‹</view>
        <text>æ–‡æœ¬å¯¼å…¥</text>
      </button>
    </view>
  </view>

  <!-- æœç´¢æ  -->
  <view class="search-section">
    <view class="search-box">
      <input
        class="search-input"
        placeholder="æœç´¢è¯¾ç¨‹..."
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        confirm-type="search"
      />
      
    </view>
  </view>

  <!-- è¯¾ç¨‹åˆ—è¡¨ -->
  <scroll-view class="courses-list" scroll-y>
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{showEmptyState}}">
      <view class="empty-icon">ğŸ“š</view>
      <view class="empty-title">æš‚æ— è¯¾ç¨‹</view>
      <view class="empty-desc">æ·»åŠ ä½ çš„ç¬¬ä¸€é—¨è¯¾ç¨‹ï¼Œå¼€å§‹ç®¡ç†å§ï¼</view>
      <view class="empty-actions">
        <button class="btn-empty-add" bindtap="goToAddCourse">æ·»åŠ è¯¾ç¨‹</button>
        <button class="btn-empty-import" bindtap="goToOCRImport">æ‹ç…§è¯†åˆ«</button>
      </view>
    </view>

    <!-- è¯¾ç¨‹å¡ç‰‡ -->
    <view
      class="course-card"
      wx:for="{{courses}}"
      wx:key="id"
      data-id="{{item.id}}"
      bindtap="viewCourseDetail"
      bindlongpress="onLongPressCourse"
    >
      <!-- è¯¾ç¨‹é¢œè‰²æ ‡ç­¾ -->
      <view class="course-color" style="background-color: {{item.color}}"></view>
      
      <view class="course-content">
      <!-- è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯ -->
      <view class="course-header">
        <view class="course-name">{{item.name}}</view>
        <view class="course-actions">
          <button
            class="btn-edit"
            data-id="{{item.id}}"
            catchtap="goToEditCourse"  
          >
            ç¼–è¾‘
          </button>
        </view>
      </view>
        
        <!-- è¯¾ç¨‹è¯¦æƒ… -->
        <view class="course-details">
          <view class="detail-item" wx:if="{{item.teacher}}">
            
            <text>{{item.teacher}}</text>
          </view>
          <view class="detail-item" wx:if="{{item.time}}">
            
            <text>{{item.time}}</text>
          </view>
          <view class="detail-item" wx:if="{{item.classroom}}">
            
            <text>{{item.classroom}}</text>
          </view>
        </view>
        
        <!-- ä½œä¸šç»Ÿè®¡ -->
        <view class="course-stats">
          <view class="stat-item">
            <view class="stat-label">ä½œä¸šæ€»æ•°</view>
            <view class="stat-value">{{item.assignmentCount || 0}}</view>
          </view>
          <view class="stat-item">
            <view class="stat-label">å·²å®Œæˆ</view>
            <view class="stat-value completed">{{item.completedCount || 0}}</view>
          </view>
          <view class="stat-item">
            <view class="stat-label">å¾…å®Œæˆ</view>
            <view class="stat-value pending">{{item.pendingCount || 0}}</view>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- åº•éƒ¨å¯¼å…¥æç¤º -->
  <view class="bottom-tip" wx:if="{{courses.length > 0}}">
    <text>å…± {{courses.length}} é—¨è¯¾ç¨‹</text>
    <text>Â·</text>
    <text>ç‚¹å‡»è¯¾ç¨‹æŸ¥çœ‹è¯¦æƒ…</text>
    <text>Â·</text>
    <text>é•¿æŒ‰è¯¾ç¨‹å¯åˆ é™¤</text>
  </view>

  <!-- æ“ä½œèœå• -->
  <view
    class="action-sheet {{showActionSheet ? 'show' : ''}}"
    bindtap="closeActionSheet"
  >
    <view class="action-sheet-content" catchtap>
      <view class="action-item" bindtap="onActionSheetSelect" data-index="0">
        <view class="action-icon">âœï¸</view>
        <text>ç¼–è¾‘è¯¾ç¨‹</text>
      </view>
      <view class="action-item delete" bindtap="onActionSheetSelect" data-index="1">
        <view class="action-icon">ğŸ—‘ï¸</view>
        <text>åˆ é™¤è¯¾ç¨‹</text>
      </view>
      <view class="action-item cancel" bindtap="closeActionSheet">
        å–æ¶ˆ
      </view>
    </view>
  </view>
</view>